import{cc as p,T as H,as as v,af as y,hk as w,gj as f,hD as x,hC as M,d as T,kG as k,kH as _}from"./index-fv_Ozbqb.js";import{b as D,d as $,s as O,k as P,q as g}from"./sliceToolConfig-C-cmAEQP.js";import{b as j,C as b,k as R,x as A}from"./SlicePlaneMaterial.glsl-UFVI6EgB.js";import{Y as C,h as B,t as h,f as G}from"./ShadedColorMaterial.glsl-CE_yHVPO.js";import{g as U}from"./ImageMaterial.glsl-B3Fjklss.js";let z=class extends C{constructor(e,i){const t=j(i),s=t?D:$,c=s*O,o=$,u={renderOccluded:4,isDecoration:!0},d=new p({...u,width:s},e.state.isGlobal),a=new p({...u,width:c},e.state.isGlobal),r=new p({...u,width:o},e.state.isGlobal);super({view:e,...B,...q({isCorner:t,unfocusedMaterial:d,focusedMaterial:a,outlineMaterial:r})}),this._themeHandle=H(()=>e.effectiveTheme.accentColor,m=>{const n=y.toUnitRGBA(m);d.setParameters({color:n}),a.setParameters({color:n}),r.setParameters({color:n})},v)}destroy(){this._themeHandle.remove(),super.destroy()}};function q({isCorner:l,unfocusedMaterial:e,focusedMaterial:i,outlineMaterial:t}){const s=l?[f(1,0,0),f(0,0,0),f(0,1,0)]:[f(1,0,0),f(-1,0,0)];return{renderObjects:[new h(w(e,s),1|b),new h(w(i,s),2|b),new h(w(t,s),R)],collisionType:{type:"line",paths:[s]},radius:l?P:g,state:b}}class F extends C{constructor(e,i){const t=x(e.effectiveTheme.accentColor,.5),s=M(e.effectiveTheme.accentColor),c=i(t,s),o=new U({draped:!1,texture:c.texture,writeDepth:!1,renderOccluded:16,isDecoration:!0}),u=G.calloutWidth,d=new p({width:u,renderOccluded:4,isDecoration:!0},e.state.isGlobal);super({view:e,...I({imageMaterial:o,calloutMaterial:d})}),this._material=o,this._textureHandle=c,this._themeHandle=H(()=>e.effectiveTheme.accentColor,a=>{const r=x(a,.5),m=M(a),n=this._textureHandle;this._textureHandle=i(r,m),o.setParameters({texture:this._textureHandle.texture}),n?.release(),d.setParameters({color:y.toUnitRGBA(a)})},v)}destroy(){this._textureHandle=T(this._textureHandle),this._themeHandle.remove(),this._material.dispose(),super.destroy()}}function I({imageMaterial:l,calloutMaterial:e}){const{focusMultiplier:i,calloutLength:t,discRadius:s}=G,c=s*i,o=(r,m)=>{const n=[0,1,2,2,3,0];return new k(m,[["position",new _([t-r,-r,0,t+r,-r,0,t+r,r,0,t-r,r,0],n,3,!0)],["uv0",new _([0,0,1,0,1,1,0,1],n,2,!0)]])},u=w(e,[[0,0,0],[t-s,0,0]]),d=w(e,[[0,0,0],[t-c,0,0]]),a=A;return{autoScaleRenderObjects:!1,collisionPriority:1,collisionType:{type:"disc",direction:[0,0,1],offset:[t,0,0]},focusMultiplier:i,radius:s,renderObjects:[new h(o(s,l),1|a),new h(u,1|a),new h(o(c,l),2|a),new h(d,2|a)],state:a}}export{z as b,F as h};
